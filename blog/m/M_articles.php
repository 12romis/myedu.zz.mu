<?phpinclude_once ("m/dbase.php");class M_articles{    private static $instance;    private $dbase;    public static function Instance (){        if (self::$instance == null)            self::$instance = new M_articles;        return self::$instance;    }    public function __construct (){        $this->dbase = new dbase();        $hostname = 'localhost';        $username = 'root';        $password = '';        $dbname = 'blog';        setlocale(LC_ALL, 'ru_RU.CP1251');        mysql_connect($hostname, $username, $password) or die('No connect with data base');        mysql_query('SET NAMES cp1251');        mysql_select_db($dbname) or die('No data base');        session_start();    }    public function debug($str){        $file = fopen('debug.txt', 'a+');        fwrite($file, "\r\n $str");        fclose($file);    }    public function all()    {        $query = "SELECT * FROM articles ORDER BY id_article DESC";        return $this->dbase->select($query);    }    public function get ($id_article)    {        $t = "SELECT * FROM articles WHERE id_article='%d'";        $query = sprintf($t, $id_article);        $result = $this->dbase->select($query);        return $result[0];    }    public function add ($title, $content)    {        $title = trim($title);        $content = trim($content);        if ($title == '')            return false;        $obj = array();        $obj ['title'] = $title;        $obj ['content'] = $content;        $this->dbase->insert ('articles', $obj);        return true;    }    public function edit($id_article, $title, $content)    {        $title = trim($title);        $content = trim($content);        if ($title == '')            return false;        $obj = array();        $obj ['title'] = $title;        $obj ['content'] = $content;        $t = "id_article = '%d'";        $where = sprintf($t, $id_article);        $this->dbase->update("articles", $obj, $where);        return true;    }    public function delete($id_article)    {        $t = "id_article = '%d'";        $where = sprintf($t, $id_article);        $this->dbase->delete('articles', $where);        return true;    }    public function intro()    {  //      $query = "SELECT title, content FROM articles ORDER BY id_article DESC";        $articles = $this->all();        foreach ($articles as $key => $value) {            $articles[$key]['content'] = substr($articles[$key]['content'], 0, 500) . "...";        }        return $articles;    }}